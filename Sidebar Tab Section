{% comment %}
  Sidebar Tab Section - Responsive with Dropdown on Mobile
{% endcomment %}

<style>
.sidebar-tab-section .container {
  max-width: 80%;
  margin: auto;
  padding: 20px;
}

.sidebar-tab-section .topic {
  font-size: 1.5rem;
  font-weight: bold;
  margin-bottom: 1rem;
}

.sidebar-tab-section .content {
  display: flex;
  gap: 1rem;
}

.sidebar-tab-section .list {
  display: flex;
  flex-direction: column;
  position: relative;
  margin-bottom: 1rem;
}

.sidebar-tab-section .tab-label {
  cursor: pointer;
  padding: 12px 16px;
  border-left: 4px solid transparent;
  transition: background 0.2s, border-color 0.2s;
  font-size: 14px; 

}

.sidebar-tab-section input[type="radio"] {
  display: none;
}

.sidebar-tab-section .slider {
  position: absolute;
  left: 0;
  width: 4px;
  height: 48px;
  background: #222222;
  transition: top 0.3s;
}

.title {
    font-weight: bold;
    font-size: 24px;
    text-align: center;
}

/* Highlight selected tab */
{% for block in section.blocks %}
  #tab-{{ block.id }}:checked ~ .list .tab-label.tab-{{ forloop.index }} {
    background: #f8f8f8;
    border-left-color: #222222;
    font-weight: bold;
  }
  #tab-{{ block.id }}:checked ~ .text-content .tab-content.tab-{{ forloop.index }} {
    display: block;
  }
{% endfor %}

.text-content {
  flex: 1;
}

.sidebar-tab-section .tab-content {
  display: none;
  animation: fadeIn 0.3s;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* ===== MOBILE STYLES ===== */
@media (max-width: 600px) {

    .title {
    font-weight: bold;
    font-size: 20px;
    text-align: center;
}

    .sidebar-tab-section .content {
  display: flex;
  gap: 1rem;
  flex-direction: column; 
}

  .sidebar-tab-section .container {
    max-width: 100%;
    padding: 10px;
  }

  /* Hide original tab list on mobile */
  .sidebar-tab-section .list {
    display: none;
  }

  /* Dropdown for mobile */
  .sidebar-tab-section .dropdown-select {
    display: block;
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 6px;
    margin-bottom: 1rem;
    font-size: 1rem;
  }
}

/* ===== MOBILE STYLES ===== */

@media (min-width: 900px) {
    select#mobile-tab-dropdown {
        display: none;
    }
}
@media only screen and (min-width: 600px) and (max-width: 900px) {

    .sidebar-tab-section .list {
    display: none;
}

.sidebar-tab-section .content {
    flex-direction: column;
}

}

</style>

<div class="sidebar-tab-section">
  <div class="container">
    <div class="topic">{{ section.settings.heading }}</div>
    <div class="content">
      
      <!-- Radio Inputs -->
      {% for block in section.blocks %}
        <input type="radio" name="slider" id="tab-{{ block.id }}" {% if forloop.first %}checked{% endif %}>
      {% endfor %}

      <!-- Dropdown for Mobile -->
      <select class="dropdown-select" id="mobile-tab-dropdown">
        {% for block in section.blocks %}
          <option value="tab-{{ block.id }}" {% if forloop.first %}selected{% endif %}>
            {{ block.settings.tab_title }}
          </option>
        {% endfor %}
      </select>

      <!-- Desktop Tab List -->
      <div class="list">
        {% for block in section.blocks %}
          <label for="tab-{{ block.id }}" class="tab-label tab-{{ forloop.index }}">
            <span>{{ block.settings.tab_title }}</span>
          </label>
        {% endfor %}
        <div class="slider"></div>
      </div>

      <!-- Tab Content Area -->
      <div class="text-content">
        {% for block in section.blocks %}
          <div class="tab-content tab-{{ forloop.index }} text">
            <div class="title">{{ block.settings.tab_title }}</div>
            <p>{{ block.settings.tab_content }}</p>
          </div>
        {% endfor %}
      </div>

    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const dropdown = document.getElementById('mobile-tab-dropdown');

  dropdown.addEventListener('change', function () {
    const selectedTab = this.value;
    const tabInput = document.getElementById(selectedTab);

    if (tabInput) {
      tabInput.checked = true;
    }
  });
});
</script>

{% schema %}
{
  "name": "Sidebar Tab Section",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Section Heading",
      "default": "CSS Vertical Tab"
    }
  ],
  "blocks": [
    {
      "type": "tab",
      "name": "Tab",
      "settings": [
        {
          "type": "text",
          "id": "tab_title",
          "label": "Tab Title",
          "default": "Tab"
        },
        {
          "type": "textarea",
          "id": "tab_content",
          "label": "Tab Content",
          "default": "Tab content goes here."
        }
      ]
    }
  ],
  "max_blocks": 15,
  "presets": [
    {
      "name": "custom Sidebar Tab",
      "category": "Custom",
      "blocks": [
        { "type": "tab", "settings": { "tab_title": "Home", "tab_content": "Home content here." } },
        { "type": "tab", "settings": { "tab_title": "Blog", "tab_content": "Blog content here." } },
        { "type": "tab", "settings": { "tab_title": "Help", "tab_content": "Help content here." } },
        { "type": "tab", "settings": { "tab_title": "Code", "tab_content": "Code content here." } },
        { "type": "tab", "settings": { "tab_title": "About", "tab_content": "About content here." } }
      ]
    }
  ]
}
{% endschema %}
